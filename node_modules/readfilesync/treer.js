#!/usr/bin/env node
const fs = require('fs');
const path = require('path');
let rootPath = process.cwd();
let count = 0;
// console.log(s);

// 1. 方法 : 通过遍历 将所有的文件以及子文件打印出来
// 1.1 方法
function dirTree(pathParams) {
  // 1. 文件
  // 2. 文件夹
  if (fs.statSync(pathParams).isDirectory()) {
    console.log(markT(count), getName(pathParams));
    count++; // 几层文件目录 |  |  |-
    let dirsList = fs.readdirSync(pathParams);
    dirsList.forEach(item => {
      dirTree(path.join(pathParams, item));
    });
    count--;
  } else {
    console.log(markT(count), getName(pathParams));
  }
}

function markT(index) { // 文件夹的层数
  if (index === 0) {
    return '你要读取的文件:';
  } else {
    let str = '';
    for (let i = 0; i < index; i++) {
      if (i === index-1) {
        str += ' ├─';
      } else {
        str += ' |';
      }
    }
    return str;
  }
}

function getName(pathName) {
  return path.parse(pathName).base;
}

// 2. 加上 |-
dirTree(rootPath);
